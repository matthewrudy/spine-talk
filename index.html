<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <title>Spine</title>
  <meta name="author" content="Matthew Rudy Jacobs" />
  <meta name="email" content="MatthewRudyJacobs@gmail.com" />
  <meta name="venue" content="Codeaholics.hk June 2011" />
  <meta name="date" content="Wednesday 29th June 2011" />

  <link type="text/css" rel="stylesheet" href="stylesheets/slippy.css"/>
  <link type="text/css" rel="stylesheet" href="stylesheets/slippy-dark.css"/>

  <link type="text/css" rel="stylesheet" href="stylesheets/shCore.css"/>
  <link type="text/css" rel="stylesheet" href="stylesheets/shThemeMidnight.css"/>

  <!-- Slippy core file and dependencies -->
  <script type="text/javascript" src="javascripts/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/jquery.history.js"></script>
  <script type="text/javascript" src="javascripts/slippy.js"></script>

  <script type="text/javascript" src="javascripts/shCore.js"></script>
  <script type="text/javascript" src="javascripts/shBrushRuby.js"></script>

  <style type="text/css">
  .slide pre {
    font-size : 0.7em;
  }
  .slide pre.massive {
    font-size : 1.0em
  }
  .slide pre.big {
    font-size : 1.0em;
  }
  .slide pre.smaller {
    font-size : 0.75em;
  }
  .slide pre.smallest {
    font-size : 0.3em;
  }
  h1 {
    font-size : 1.5em;
  }
  h1.extra {
    font-size : 3.5em;
  }
  li {
    padding : 0.5em 0;
  }
  #background {
    color : #333;
  }
  </style>

  <!-- Slippy init code -->
  <script type="text/javascript">
    jQuery(function($){
      $(".slide").slippy({widthInCharacters: 20});
    });
  </script>
</head>

<body>
  <div class="slide">
    <h1>Javascript Web Applications</h1>
    <p>Codeaholics.hk</p>
    <p>Wednesday 29th June 2011</p>
  </div>

  <div class="slide">
    <h1>The Book</h1>
  </div>

  <div class="slide">
    <h1>What the hell is he talking about?</h1>
    <h2>Backbone?</h2>
  </div>
  
  <div class="slide">
    <h1>Spine!</h1>
    <h2>because I like Alex</h2>
  </div>

  <div class="slide">
    <h1>MVC on the client</h1>
  </div>

  <div class="slide">
    <h1>The Model</h1>
    <ul>
      <li class="incremental">where you store your data</li>
      <li class="incremental">a local representation of your data</li>
    </ul>
  </div>

  <div class="slide">
    <h2>Spine.Model</h2>
    <pre class="big">var Message = 
  Spine.Model.setup(
  
    // the name
    "Message",
    
    // the fields
    ["body"
    ,"name"
    ,"channel_id"
    ]);</pre>
  </div>
  
  <div class="slide">
    <h1>Add some Class Methods</h1>
    <pre class="big">
Message.extend({
  poos: function(){
    return this.select(function(m){
      return m.body == "poo";
    });
  }
});

Message.poos()
// [Message, ...]</pre>
  </div>
  
  <div class="slide">
    <h1>Default some attributes</h2>
    <pre class="big">Message.include({
  body: "blah blah blah",
  name: "Robot"
  });</pre>
  </div>
  
  <div class="slide">
    <h1>Add some Instance Methods</h2>
    <pre class="big">Message.include({
  channel: function(){
    return Channel.find(
      this.channel_id
    );
  }
});

message.channel() // Channel:44</pre>
  </div>
  
  <div class="slide">
    <h1>Validate it</h1>
    <pre class="big">
Message.include({
  validate: function(){
    if(!this.channel_id){
      // return a message
      // to stop save()
      return "channel_id required";
    }
  }
});
</pre>
  </div>
  
  <div class="slide">
    <h1>Instantiate it!</h1>
    <pre class="big">
var message = Message.init({
  name: "Peter",
  body: "oh gosh"
});

message.name // "Peter"
message.channel() // null
message.save() // Validation failed:
</pre>
  </div>
  
  <div class="slide">
    <h1>Persist in Memory!</h1>
    <pre class="big">
message.channel_id = 12345;
message.save();

// ace
// for now
// refresh your browser
// its gone
  </div>
  
  <div class="slide">
    <h1>Persist locally!</h1>
    <pre class="massive">
// html 5 datastore

if(Modernizr.localstorage){
  Message.extend(
    Spine.Model.Local
  );
}</pre>
  </div>
  
  <div class="slide">
    <h1>Persist via Ajax!</h1>
    <pre class="massive">
Message.extend(Spine.Model.Ajax);

// GET /messages
Message.fetch();

// POST /messages
var message = Message.create();

// PUT /messages/:id
message.save();
</pre>
  </div>
  
  <div class="slide">
    <h1>Override the URL!</h1>
    <pre class="massive">
Message.extend({
  url: "/chat/messages"
});
</pre>
  </div>

</body>
</html>
